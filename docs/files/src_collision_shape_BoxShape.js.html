<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>src\collision\shape\BoxShape.js - oimo</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="icon" href="../assets/favicon.ico">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><img src="../assets/css/logo.png" title="oimo" width="117" height="52"></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 1.0.4</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/BoxShape.html">BoxShape</a></li>
                                <li><a href="../classes/CylinderShape.html">CylinderShape</a></li>
                                <li><a href="../classes/MassInfo.html">MassInfo</a></li>
                                <li><a href="../classes/Proxy.html">Proxy</a></li>
                                <li><a href="../classes/Shape.html">Shape</a></li>
                                <li><a href="../classes/ShapeConfig.html">ShapeConfig</a></li>
                                <li><a href="../classes/SphereShape.html">SphereShape</a></li>
                            </ul>
                
                
                            <ul id="api-modules" class="apis modules">
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<h1 class="file-heading">File: src\collision\shape\BoxShape.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
import { SHAPE_BOX, AABB_PROX } from &#x27;../../constants&#x27;;
import { Shape } from &#x27;./Shape&#x27;;

/**
 * A box shape.
 *
 * @class BoxShape
 * @constructor
 * @extends Shape
 * @author saharan
 * @author lo-th
 */
function BoxShape( config, Width, Height, Depth ) {

    Shape.call( this, config );

    this.type = SHAPE_BOX;

    /**
     * The width of the box.
     *
     * @property width
     * @type {Number}
     */
    this.width = Width;

    /**
     * The height of the box.
     *
     * @property height
     * @type {Number}
     */
    this.height = Height;

    /**
     * The depth of the box.
     *
     * @property depth
     * @type {Number}
     */
    this.depth = Depth;

    /**
     * The half-width of the box.
     *
     * @property halfWidth
     * @type {Number}
     */
    this.halfWidth = Width * 0.5;

    /**
     * The half-height of the box.
     *
     * @property halfHeight
     * @type {Number}
     */
    this.halfHeight = Height * 0.5;

    /**
     * The half-depth of the box.
     *
     * @property halfDepth
     * @type {Number}
     */
    this.halfDepth = Depth * 0.5;

    this.dimentions = new Float32Array( 18 );
    this.elements = new Float32Array( 24 );

};

BoxShape.prototype = Object.create( Shape.prototype );
BoxShape.prototype.constructor = BoxShape;

BoxShape.prototype.calculateMassInfo = function ( out ) {

    var mass = this.width * this.height * this.depth * this.density;
    var divid = 1/12;
    out.mass = mass;
    out.inertia.set(
        mass * ( this.height * this.height + this.depth * this.depth ) * divid, 0, 0,
        0, mass * ( this.width * this.width + this.depth * this.depth ) * divid, 0,
        0, 0, mass * ( this.width * this.width + this.height * this.height ) * divid
    );

};

BoxShape.prototype.updateProxy = function () {

    var te = this.rotation.elements;
    var di = this.dimentions;
    // Width
    di[0] = te[0];
    di[1] = te[3];
    di[2] = te[6];
    // Height
    di[3] = te[1];
    di[4] = te[4];
    di[5] = te[7];
    // Depth
    di[6] = te[2];
    di[7] = te[5];
    di[8] = te[8];
    // halp Width
    di[9] = te[0] * this.halfWidth;
    di[10] = te[3] * this.halfWidth;
    di[11] = te[6] * this.halfWidth;
    // halp Height
    di[12] = te[1] * this.halfHeight;
    di[13] = te[4] * this.halfHeight;
    di[14] = te[7] * this.halfHeight;
    // halp Depth
    di[15] = te[2] * this.halfDepth;
    di[16] = te[5] * this.halfDepth;
    di[17] = te[8] * this.halfDepth;

    var wx = di[9];
    var wy = di[10];
    var wz = di[11];
    var hx = di[12];
    var hy = di[13];
    var hz = di[14];
    var dx = di[15];
    var dy = di[16];
    var dz = di[17];

    var x = this.position.x;
    var y = this.position.y;
    var z = this.position.z;

    var v = this.elements;
    //v1
    v[0] = x + wx + hx + dx;
    v[1] = y + wy + hy + dy;
    v[2] = z + wz + hz + dz;
    //v2
    v[3] = x + wx + hx - dx;
    v[4] = y + wy + hy - dy;
    v[5] = z + wz + hz - dz;
    //v3
    v[6] = x + wx - hx + dx;
    v[7] = y + wy - hy + dy;
    v[8] = z + wz - hz + dz;
    //v4
    v[9] = x + wx - hx - dx;
    v[10] = y + wy - hy - dy;
    v[11] = z + wz - hz - dz;
    //v5
    v[12] = x - wx + hx + dx;
    v[13] = y - wy + hy + dy;
    v[14] = z - wz + hz + dz;
    //v6
    v[15] = x - wx + hx - dx;
    v[16] = y - wy + hy - dy;
    v[17] = z - wz + hz - dz;
    //v7
    v[18] = x - wx - hx + dx;
    v[19] = y - wy - hy + dy;
    v[20] = z - wz - hz + dz;
    //v8
    v[21] = x - wx - hx - dx;
    v[22] = y - wy - hy - dy;
    v[23] = z - wz - hz - dz;

    var w = di[9] &lt; 0 ? -di[9] : di[9];
    var h = di[10] &lt; 0 ? -di[10] : di[10];
    var d = di[11] &lt; 0 ? -di[11] : di[11];

    w = di[12] &lt; 0 ? w - di[12] : w + di[12];
    h = di[13] &lt; 0 ? h - di[13] : h + di[13];
    d = di[14] &lt; 0 ? d - di[14] : d + di[14];

    w = di[15] &lt; 0 ? w - di[15] : w + di[15];
    h = di[16] &lt; 0 ? h - di[16] : h + di[16];
    d = di[17] &lt; 0 ? d - di[17] : d + di[17];

    var p = AABB_PROX;

    this.aabb.set(
        this.position.x - w - p, this.position.x + w + p,
        this.position.y - h - p, this.position.y + h + p,
        this.position.z - d - p, this.position.z + d + p
    );

    if ( this.proxy != null ) this.proxy.update();

};

export { BoxShape };
    </pre>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
