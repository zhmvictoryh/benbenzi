<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<title>pinball</title>
<meta name="Description" content="" />
<meta name="Keywords"  content="" />
<link rel="icon" href="../favicon.ico" />
<style>
* {  margin: 0; padding: 0; border: 0;} 
body{ background-color: #3D4143; overflow: hidden; color:#cccccc; font-family:Arial; font-size: 10px; text-shadow: 1px 1px #000000;}
button {padding:8px; border: 2px solid #72797D; cursor: pointer; background:linear-gradient(#72797D , #3D4143); color:#CCCCCC; -moz-border-radius: 16px; -webkit-border-radius: 16px; border-radius: 16px;}
button:hover{border: 2px solid #72797D; cursor: pointer; background: #11BBFF; color:#000000; font-weight: bold;}
#walk{ position: absolute; top: 20px; left: 5px; width:70px; }
#run{ position: absolute;  top: 20px; left: 80px; width:70px; }
</style>
</head>
<body>
<div id='container'></div>
<script src="../js/three.min.js"></script>
<script src="../js/loaders/sea3d/SEA3D.js"></script>
<script src="../js/loaders/sea3d/SEA3DLoader.js"></script>
<script src="../js/loaders/sea3d/SEA3DLZMA.js"></script>
<script src="../build/Oimo.min.js"></script>
<script src="../js/v3d.js"></script>
<script>
var v3d, pool;
var geos = {};
var mats = {};
var ToRad = Math.PI / 180;

init();
loop();

function init() {
    v3d = new V3D.View(360,60,500);
    v3d.initLightShadow();
    pool = new V3D.Pool();
    pool.loadModels( ['../models/pinball.sea'], initPinball );
}

function loop() {
    v3d.render();
    requestAnimationFrame( loop );
}

function initPinball(){
    var body = new THREE.Object3D();
    body.add(pool.getMesh('base'));
    body.add(pool.getMesh('foot'));
    body.add(pool.getMesh('baseup'));
    body.add(pool.getMesh('inside'));
    body.add(pool.getMesh('screen'));
    body.add(pool.getMesh('glass'));
    body.add(pool.getMesh('deco'));
    body.add(pool.getMesh('level'));
    var mtx = new THREE.Matrix4();
    mtx.makeScale(4, 4, -4);
    for(var i = 0; i<body.children.length;i++){
        body.children[i].geometry.applyMatrix(mtx);
        body.children[i].material.ambient.setHex(0x999999);
    }
    pool.getMesh('glass').transparent = true;
    pool.getMesh('glass').opacity = 0.4;
    body.rotation.z = -5*ToRad;
    v3d.scene.add(body);
}

</script>
</body>
</html>